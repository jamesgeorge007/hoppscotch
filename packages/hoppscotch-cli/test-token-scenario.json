{
  "v": 10,
  "id": "test-token-scenario",
  "name": "Token Dependency Scenario",
  "folders": [],
  "requests": [
    {
      "v": "16",
      "name": "token-test",
      "method": "GET",
      "endpoint": "https://echo.hoppscotch.io",
      "params": [],
      "headers": [],
      "preRequestScript": "",
      "testScript": "// EXACT SCENARIO from user's question:\n// let token = \n// hopp.test(..., () => { fetch token async })\n// hopp.test(.., { async action using token here })\n\nlet token = null\n\nconsole.log('\\n=== TOKEN DEPENDENCY TEST ===')\n\nhopp.test('Fetch and store token', async () => {\n  console.log('[FETCH_TOKEN] Starting...')\n  const response = await hopp.fetch('https://echo.hoppscotch.io?action=get_token')\n  const data = await response.json()\n  \n  // Simulate token from API response\n  token = 'secret_token_' + Date.now()\n  console.log('[FETCH_TOKEN] Token obtained:', token)\n  \n  hopp.expect(response.status).toBe(200)\n  hopp.expect(token).not.toBe(null)\n  console.log('[FETCH_TOKEN] Complete\\n')\n})\n\nhopp.test('Use token from previous test', async () => {\n  console.log('[USE_TOKEN] Starting...')\n  console.log('[USE_TOKEN] Token value:', token)\n  \n  if (token === null) {\n    console.log('[USE_TOKEN] ✗✗✗ ERROR: Token is NULL! ✗✗✗')\n    console.log('[USE_TOKEN] ✗✗✗ Previous test did NOT complete first! ✗✗✗')\n    console.log('[USE_TOKEN] ✗✗✗ This will FAIL in production! ✗✗✗\\n')\n  } else {\n    console.log('[USE_TOKEN] ✓✓✓ SUCCESS: Token is available! ✓✓✓\\n')\n  }\n  \n  // Try to use the token in a request\n  const response = await hopp.fetch('https://echo.hoppscotch.io?token=' + token)\n  const data = await response.json()\n  \n  console.log('[USE_TOKEN] Request sent with token:', data.args.token)\n  \n  // These expectations will FAIL if tests run concurrently\n  hopp.expect(token).not.toBe(null)\n  hopp.expect(data.args.token).toBe(token)\n  hopp.expect(data.args.token).not.toBe('null') // This fails if token was null!\n  \n  console.log('[USE_TOKEN] Complete\\n')\n})\n\nconsole.log('=== TESTS REGISTERED ===\\n')\n",
      "auth": {
        "authType": "inherit",
        "authActive": true
      },
      "body": {
        "contentType": null,
        "body": null
      },
      "requestVariables": [],
      "responses": {},
      "_ref_id": "req_token_scenario"
    }
  ],
  "auth": {
    "authType": "inherit",
    "authActive": true
  },
  "headers": [],
  "variables": [],
  "_ref_id": "coll_token_scenario"
}
